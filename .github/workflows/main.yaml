#work flow
name: Deploy to heroku

#Run workflow on every push to main branch
on:
  push:
    branches: [main]

#your workflows jobs
jobs:
  build:
    runs-on: ubuntu-latest
      steps:
        #check-out our repository.
        - name: checkout
          uses: actions/checkout@v2

        #IMPORTANT PART##

        - name: Build, Push and Release a Docker container to Heroku  #your custom step name
          users: gonuit/heroku-docker-deploy@v1.3.3 #GitHub action name (leave it as it is).
          with:
            #Below you must provide variables for your Heroku app.
            
            #The email address associated with your Heroku account.
            #If you don't want to use repository secrets (Which is recommended) you can do:
            #email: my.email@gmail.com
            email: ${{ secrets.HEROKU_EMAIL}}

            #HEROKU api KEY associated with provided user's email
            #Api key is available under your heroku account settings.

            heroku_api_key: ${{secrets.HEROKU_API_KEY}}

            #Name of the heroku application to which the build is to be sent.

            heroku_app_name: ${{ secrets.HEROKU_APP_NAME}}


          #(Optional, default: "./")
          #Dockerfile directory.
          #For example, if you have a Dockerfile in the root of your project, leave it as follows:

          dockerfile_directory: ./

          #(optional,default:"Dockerfile")
          #Dockerfile name.

          dockerfile_name: Dockerfile

          #(optional,default:"Dockerfile")
          #Additional options of docker build command.
          docker_options: "--no-cache"

          #(optional,default:"web")
          #select the process type for which you want the docker container to be uploaded
          #By default, this argument is set to "web"

          process_type: web



        



    
  
